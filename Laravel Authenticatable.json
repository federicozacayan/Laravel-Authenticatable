[[1581322031945,"h1","Laravel Authenticatable"],[1581234107326,"p","Install laravel/ui."],[1581234107539,"html","composer require laravel/ui --dev"],[1581234116777,"p","Install javascript tools."],[1581234116948,"html","php artisan ui vue --auth"],[1581234117134,"p","Run javascript tools."],[1581234117310,"html","npm install && npm run dev"],[1581234117478,"h2","Create a model"],[1581234117668,"html","php artisan make:model Administrator --all\n"],[1581283132733,"p","Copy the fields from User migration database/migrations/2014_10_12_000000_create_users_table.php into CreateAdministratorsTable class file."],[1581283132955,"javascript","$table->string('name');\n$table->string('email')->unique();\n$table->timestamp('email_verified_at')->nullable();\n$table->string('password');\n$table->rememberToken();"],[1581234198571,"p","After configuring database run the migrations."],[1581234198734,"html","php artisan migrate"],[1581234198897,"p","Copy and paste user model and change the class name and the file name by Administrator and app/Administrator.php."],[1581234199114,"javascript","class Administrator extends Authenticatable"],[1581289466704,"p","Set up the AdministratorController."],[1581289466903,"javascript","<?php\nnamespace App\\Http\\Controllers;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Foundation\\Auth\\AuthenticatesUsers;\nuse Illuminate\\Support\\Facades\\Auth;\nclass AdministratorController extends Controller\n{\n    public function __construct()\n    {\n        $this->middleware('auth:admins', ['only' => ['secret']]);\n    }\n    use AuthenticatesUsers;\n    public function showLoginForm()\n    {\n        return view('admin.login');\n    }\n    private $redirectTo = 'admin/area';\n    public function secret(){\n        $user = auth('admins')->user();\n        echo 'Admin id #'.$user->id;\n    }\n    protected function guard()\n    {\n        return Auth::guard('admins');\n    }\n}\n"],[1581234580800,"p","Add a new guard in config/auth.php."],[1581234580965,"javascript","'guards' => [\n    ...\n    'admins' => [\n        'driver' => 'session',\n        'provider' => 'admins',\n    ],\n],"],[1581234581137,"p","Add a new provider also in the same file."],[1581234581306,"javascript","'providers' => [\n    ...\n    'admins' => [\n        'driver' => 'eloquent',\n        'model' => App\\Administrator::class,\n    ],\n],"],[1581289544848,"p","Add routes in routes/web.php file."],[1581289545034,"javascript","Route::get('/admin/login', 'AdministratorController@showLoginForm');\nRoute::post('/admin/login', 'AdministratorController@login')->name('admin.login');\nRoute::get('/admin/area', 'AdministratorController@secret')->name('admin.area');\n\nRoute::get('/admin/register', 'AdminRegisterController@showRegistrationForm')->name('admin.register');\nRoute::post('/admin/register', 'AdminRegisterController@register');\n"],[1581289545221,"p","Copy and paste from resources/views/layouts/app.blade.php to resources/views/admin/app.blade.php."],[1581289545385,"html","<!-- Authentication Links -->\n@if(!auth('admins')->check())\n    <li class=\"nav-item\">\n        <a class=\"nav-link\" href=\"{{ route('admin.login') }}\">{{ __('Login') }}</a>\n    </li>\n    @if (Route::has('admin.register'))\n        <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"{{ route('admin.register') }}\">{{ __('Register') }}</a>\n        </li>\n    @endif\n@else\n    <li class=\"nav-item dropdown\">\n        <a id=\"navbarDropdown\" class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-pre>\n            {{ auth('admins')->user()->name }} <span class=\"caret\"></span>\n        </a>\n        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\">\n            <a class=\"dropdown-item\" href=\"{{ route('logout') }}\"\n                onclick=\"event.preventDefault();\n                                document.getElementById('logout-form').submit();\">\n                {{ __('Logout') }}\n            </a>\n            <form id=\"logout-form\" action=\"{{ route('logout') }}\" method=\"POST\" style=\"display: none;\">\n                @csrf\n            </form>\n        </div>\n    </li>\n@endif"],[1581324081984,"p","Copy resources/views/auth/login.blade.php file and paste it in resources/views/admin/login.blade.php file."],[1581324082185,"html","@extends('admin.app')\n...\n<form method=\"POST\" action=\"{{ route('admin.login') }}\">\n...\n@if (Route::has('admin.password.request'))\n    <a class=\"btn btn-link\" href=\"{{ route('admin.password.request') }}\">\n        {{ __('Forgot Your Password?') }}\n    </a>\n@endif"],[1581324664837,"h2","Register Admin"],[1581324630464,"p","Set up the controller in app/Http/Controllers/AdminRegisterController.php file."],[1581324631238,"html","php artisan make:controller AdminRegisterController"],[1581324785141,"p","Copy and paste from RegisterController class, add Auth class too and overwrite the methods \"showRegistrationForm\" and \"guard\"."],[1581324631483,"javascript","namespace App\\Http\\Controllers;\nuse Illuminate\\Support\\Facades\\Auth;\nuse App\\Administrators; //change User by Administrators\n...\nclass AdminRegisterController extends Controller\n{\n    ...\n    //change RouteServiceProvider::HOME by 'admin/login'\n    protected $redirectTo = 'admin/login'; \n    protected function create(array $data) \n    {\n        //change User by Administrators\n        return Administrators::create([\n            'name' => $data['name'],\n            'email' => $data['email'],\n            'password' => Hash::make($data['password']),\n        ]);\n    }\n    public function showRegistrationForm()\n    {\n        return view('admin.register');\n    }\n    protected function guard()\n    {\n        return Auth::guard('admins');\n    }\n}"],[1581289545567,"p","The same process with resources/views/auth/register.blade.php file and resources/views/admin/register.blade.php file. Just change the following lines.\n"],[1581289683029,"html","@extends('admin.app')\n...\n<form method=\"POST\" action=\"{{ route('admin.register') }}\">\n...                    "],[1581289683575,"h2","Password Recovery "],[1581289683734,"p","Set up password provider in config/auth.php."],[1581289684725,"javascript","'passwords' => [\n    ...\n    'admins' => [\n        'provider' => 'admins',\n        'table' => 'password_resets',\n        'expire' => 60,\n        'throttle' => 60,\n    ],\n],"],[1581290819038,"p","Create AdminForgotPasswordController."],[1581290819206,"html","php artisan make:controller AdminForgotPasswordController"],[1581290819400,"p","Set up app/Http/Controllers/AdminForgotPasswordController.php \n File."],[1581291021554,"javascript","<?php\nnamespace App\\Http\\Controllers;\nuse App\\Http\\Controllers\\Controller;\nuse Illuminate\\Foundation\\Auth\\SendsPasswordResetEmails;\nuse Illuminate\\Support\\Facades\\Password; //check it out\nclass AdminForgotPasswordController extends Controller\n{\n    use SendsPasswordResetEmails;\n    public function broker()\n    {\n        return Password::broker('admins');\n    }\n    public function showLinkRequestForm()\n    {\n        return view('admin.email');\n    }\n}"],[1581289684916,"p","Generate the routes in routes/web.php."],[1581289685078,"javascript","Route::get('/admin/password/reset','AdminForgotPasswordController@showLinkRequestForm')->name('admin.password.request');\nRoute::post('/admin/password/email','AdminForgotPasswordController@sendResetLinkEmail')->name('admin.password.email');"],[1581291131927,"p","Copy resources/views/auth/passwords/email.blade.php in resources/views/admin/email.blade.php. "],[1581291132283,"html","@extends('admin.app')\n...\n<form method=\"POST\" action=\"{{ route('admin.password.email') }}\">\n"],[1581291132462,"p","Config mailsender"],[1581291132649,"javascript","MAIL_DRIVER=smtp\nMAIL_HOST=smtp.mailtrap.io\nMAIL_PORT=2525\nMAIL_USERNAME=xxxxxxxxxxxxxxx\nMAIL_PASSWORD=xxxxxxxxxxxxxxx\nMAIL_FROM_ADDRESS=from@example.com\nMAIL_FROM_NAME=Example"],[1581291132827,"p","Now, to make a new email we create a app/AdminResetPassword.php file to overwrite the method toMail."],[1581291132982,"javascript","<?php\nnamespace App;\nuse Illuminate\\Auth\\Notifications\\ResetPassword;\nuse Illuminate\\Notifications\\Messages\\MailMessage;\nuse Illuminate\\Support\\Facades\\Lang;\nclass AdminResetPassword extends ResetPassword\n{\n    public function toMail($notifiable)\n    {\n        if (static::$toMailCallback) {\n            return call_user_func(static::$toMailCallback, $notifiable, $this->token);\n        }\n        return (new MailMessage)\n            ->subject(Lang::get('Reset Password Notification'))\n            ->line(Lang::get('You are receiving this email because we received a password reset request for your account.'))\n            ->action(Lang::get('Reset Password'), url(config('app.url').route('admin.password.reset', ['token' => $this->token, 'email' => $notifiable->getEmailForPasswordReset()], false)))\n            ->line(Lang::get('This password reset link will expire in :count minutes.', ['count' => config('auth.passwords.'.config('auth.defaults.passwords').'.expire')]))\n            ->line(Lang::get('If you did not request a password reset, no further action is required.'));\n    }\n}"],[1581291133153,"p","And we need to add an extra method to the Administrator model in app/Administrator.php file."],[1581291133343,"javascript","<?php\n...\nuse App\\AdminResetPassword;\n...\nclass Administrator extends Authenticatable\n    ...\n    public function sendPasswordResetNotification($token)\n    {\n        $this->notify(new AdminResetPassword($token));\n    }\n}"],[1581291133541,"p","Copy resources/views/auth/passwords/reset.blade.php file into resources/views/admin/reset.blade.php file. Then, change the following lines."],[1581291133725,"javascript","@extends('admin.app')\n...\n<form method=\"POST\" action=\"{{ route('admin.password.update') }}\">"],[1581320442933,"p","Create AdminResetPasswordController class."],[1581320443171,"javascript","php artisan make:controller AdminResetPasswordController"],[1581320504093,"p","app/Http/Controllers/AdminResetPasswordController.php."],[1581320504301,"javascript","<?php\nnamespace App\\Http\\Controllers;\nuse App\\Http\\Controllers\\Controller;\nuse App\\Providers\\RouteServiceProvider;\nuse Illuminate\\Foundation\\Auth\\ResetsPasswords;\nuse Illuminate\\Http\\Request;// check it out\nuse Illuminate\\Support\\Facades\\Password;// check it out\nclass AdminResetPasswordController extends Controller\n{\n    use ResetsPasswords;\n    protected $redirectTo = '/admin/login';\n    public function broker()\n    {\n        return Password::broker('admins');\n    }\n    public function showResetForm(Request $request, $token = null)\n    {\n        return view('admin.reset')->with(\n            ['token' => $token, 'email' => $request->email]\n        );\n    }\n}"],[1581320053967,"p","Create some routes in routes/web.php file:"],[1581320054175,"javascript","Route::get('/admin/password/reset/{token}','AdminResetPasswordController@showResetForm')->name('admin.password.reset');\nRoute::post('/admin/password/reset','AdminResetPasswordController@reset')->name('admin.password.update');"],[1581233883265,"p","That is all."]]